{% extends 'base.html' %}
{% block title %}Meu Perfil{% endblock %}

{% block content %}
<h2>Meu Perfil</h2>

<p><strong>Nome:</strong> {{ user.nome }}</p>
<p><strong>E-mail de login:</strong> {{ user.email_principal }}</p>
<p><strong>E-mail da empresa:</strong> {{ user.email_empresa or 'â€“' }}</p>
<p><strong>Status de ativaÃ§Ã£o:</strong>
    {% if user.status == Status.ATIVO %}
    <span style="color:green">Ativo</span>
    {% elif user.status == Status.AGUARDANDO %}
    <span style="color:orange">Aguardando ativaÃ§Ã£o</span>
    {% else %}
    <span style="color:red">Inativo</span>
    {% endif %}
</p>

{# â€” Caso seja google-user pendente sem email_empresa â€” #}
{% if user.google_id and user.status == Status.AGUARDANDO and not user.email_empresa %}
<p>
    Caso seja funcionÃ¡rio autorizado,
    <a href="{{ url_for('profile.request_activation') }}">
        clique aqui para solicitar ativaÃ§Ã£o
    </a>.
</p>
{% endif %}

<hr>

<a href="{{ url_for('profile.edit') }}">âœï¸ Editar perfil</a>
{% if user.email_empresa and user.status == Status.AGUARDANDO %}
| <a href="{{ url_for('profile.send_confirm') }}">ğŸ“§ Enviar confirmaÃ§Ã£o de e-mail</a>
{% endif %}

<hr>

{# Vincular / Desvincular Google #}
{% if not user.email_google %}
<a href="{{ url_for('google.login') }}">ğŸ”— Vincular conta Google</a>
{% else %}
<p><strong>Google vinculado:</strong> {{ user.email_google }}</p>
<a href="{{ url_for('google_auth.google_unlink') }}">âŒ Desvincular Google</a>
{% endif %}

<hr>
<a href="{{ url_for('main.dashboard') }}">â† Voltar ao Painel</a>
{% endblock %}